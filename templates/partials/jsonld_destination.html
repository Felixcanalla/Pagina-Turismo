{% load wagtailimages_tags %}

{% with canonical=page.full_url|default:request.build_absolute_uri %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ page.seo_title|default:page.title|escapejs }}",
  "url": "{{ canonical }}"{% if page.search_description %},
  "description": "{{ page.search_description|striptags|escapejs }}"{% elif page.intro %},
  "description": "{{ page.intro|striptags|escapejs }}"{% endif %}{% if page.hero_image %},
  "primaryImageOfPage": {
    "@type": "ImageObject",
    "url": "{% image page.hero_image fill-1200x630 as img %}{{ img.url }}"
  }{% endif %}
}
</script>

{% if page.get_faq_jsonld %}
  <script type="application/ld+json">{{ page.get_faq_jsonld|safe }}</script>
{% endif %}
{% endwith %}
