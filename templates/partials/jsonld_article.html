{% load wagtailimages_tags static %}

{% with base_url=request.scheme|add:'://'|add:request.get_host %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ page.title|escapejs }}",
  "description": "{{ page.seo_description|default:''|escapejs }}",
  "mainEntityOfPage": "{{ page.full_url|default:''|escapejs }}",
  "datePublished": "{{ page.first_published_at|date:'c' }}",
  "dateModified": "{{ page.last_published_at|default:page.first_published_at|date:'c' }}",
  "author": { "@type": "Person", "name": "Patricio Migone" },
  "publisher": { "@type": "Organization", "name": "{{ request.site.site_name|default:'Blog de Viajes'|escapejs }}" },
  "image": [
    {% if page.cover_image %}
      {% image page.cover_image fill-1200x630 as ldimg %}
      "{{ base_url }}{{ ldimg.url }}"
    {% elif page.hero_image %}
      {% image page.hero_image fill-1200x630 as ldimg %}
      "{{ base_url }}{{ ldimg.url }}"
    {% else %}
      "{{ base_url }}{% static 'img/og-default.jpg' %}"
    {% endif %}
  ]
}
</script>
{% endwith %}
