{% extends "base.html" %}
{% load wagtailimages_tags %}

{% block extra_head %}
  {% include "partials/jsonld_breadcrumbs.html" %}
  {% include "partials/jsonld_article.html" %}
  {# solo si querés FAQ en artículos también #}
  {# {% include "partials/jsonld_faq.html" %} #}
{% endblock %}


{% block content %}
<article class="container">

  <header class="hero hero--stack">
    <div class="hero-stack">

      <nav class="breadcrumbs" aria-label="Breadcrumb">
        <ol>
          <li><a href="/">Inicio</a></li>
          {% for ancestor in breadcrumb_ancestors %}
            <li><a href="{{ ancestor.url }}">{{ ancestor.title }}</a></li>
          {% endfor %}
          <li aria-current="page">{{ page.title }}</li>
        </ol>
      </nav>

      <h1>{{ page.title }}</h1>
      {% if page.intro %}<p class="muted">{{ page.intro }}</p>{% endif %}
    </div>

    {% if page.cover_image %}
      {% image page.cover_image fill-1600x700 class="hero-img" %}
    {% endif %}
  </header>

  <div class="post__content">
    {% if toc %}
      <nav class="toc" aria-label="Tabla de contenidos">
        <h3 class="toc__title">Contenido</h3>
        <ul class="toc__list">
          {% for item in toc %}
            <li class="toc__item">
              <a class="toc__link" href="#{{ item.anchor }}">{{ item.title }}</a>
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}

    <div class="content post__body">
      {{ body_html|safe }}
    </div>
  </div>

  {# ✅ Destinos relacionados (Orderable) #}
  {% if page.destinos_relacionados.all %}
    <section class="related">
      <h2>Destinos relacionados</h2>
      <ul>
        {% for rel in page.destinos_relacionados.all %}
          <li><a href="{{ rel.destino.url }}">{{ rel.destino.title }}</a></li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}

</article>
{% endblock %}
